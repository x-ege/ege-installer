# Dev-C++ EGE 项目使用指南

## 🎉 安装成功

EGE 图形库已成功安装到您的 Dev-C++！现在就可以开始创建图形项目了。

> **⚠️ 重要提示**：此模板仅支持 64-bit 编译，请确保编译器架构设置为 **x86_64**。

---

## 📝 创建新的 EGE 项目

### 方法一：使用项目模板（推荐）

1. 打开 Dev-C++
2. 点击菜单：**文件 → 新建 → 项目...**
3. 选择 **Multimedia** 标签页
4. 点击 **EGE Graphics**，输入项目名称
5. 点击**确定**，项目创建完成！

![new_proj](images/devcpp_new_proj.png)

**模板已自动配置好所有编译和链接选项，无需手动设置。**

> ⚠ 如果在 Multimedia 标签页中没有看到 EGE Graphics，请关闭并重新打开 Dev-C++ 后再试。

---

## 🚀 快速开始示例

创建 `main.cpp` 并输入以下代码：

```cpp
#include <graphics.h>

int main()
{
    // 初始化图形窗口 (640x480)
    initgraph(640, 480, 0);
    
    // 设置窗口标题
    setcaption("EGE Graphics - Hello World");
    
    // 设置背景色为白色
    setbkcolor(WHITE);
    cleardevice();
    
    // 绘制一个蓝色填充圆
    setfillcolor(BLUE);
    fillellipse(320, 200, 100, 100);
    
    // 设置文字颜色并输出
    setcolor(BLACK);
    setfont(24, 0, "微软雅黑");
    outtextxy(220, 350, "Hello, EGE Graphics!");
    
    // 等待用户按键
    getch();
    
    // 关闭图形窗口
    closegraph();
    
    return 0;
}
```

点击 **编译运行** (F11) 即可运行程序！

---

## 📚 更多资源

- **官方网站**: <https://xege.org/>
- **GitHub**: <https://github.com/wysaid/xege>

---

## 🔧 故障排除

### 编译器架构设置

如果出现编译错误，请确认编译器架构设置正确：

1. **工具 → 编译器选项**
2. **设置 → 代码生成 → 架构 = x86_64**
3. 确保未选择 i686（32-bit 模式不支持）

**说明**：EGE 模板仅提供 64-bit 库文件，必须使用 x86_64 架构编译。

![64bit](images/devcpp_choose_64bit.png)

---

## ⚙️ 高级配置

### 手动配置现有项目

如果您需要在现有项目中使用 EGE，请按以下步骤配置：

#### 1. 创建项目

- **文件 → 新建 → 项目...**
- 选择 **Basic** 标签页中的 **Empty Project** 或 **Console Application**
- 输入项目名称，点击确定

#### 2. 配置链接器选项

- 点击菜单：**项目 → 项目属性**
- 切换到 **参数** 标签页
- 在 **链接器** 输入框中添加以下内容：

```text
-lgraphics -lgdiplus -lgdi32 -limm32 -lmsimg32 -lole32 -loleaut32 -lwinmm -luuid -mwindows -static
```

#### 3. 保存设置

点击 **确定** 保存所有设置。

---

## ❓ 常见问题

### Q: 编译时提示找不到 graphics.h？

**A**: 确保已安装到正确的 Dev-C++，重新运行安装程序。

### Q: 编译时出现架构相关错误？

**A**: 请检查编译器架构设置。参阅上方 [故障排除 - 编译器架构设置](#故障排除) 章节。

### Q: 链接时出现 undefined reference 错误？

**A**: 检查链接器设置中是否添加了所有必需的库。使用项目模板创建的项目已自动配置。如需手动配置，请参阅 [高级配置](#高级配置) 章节。

### Q: 程序运行时闪退？

**A**: 检查是否调用了 `getch()` 等待用户输入，避免窗口立即关闭。

### Q: Multimedia 标签页中看不到 EGE Graphics 模板？

**A**: 请尝试以下步骤：

1. **完全关闭** Dev-C++（确保任务管理器中没有残留进程）
2. **重新启动** Dev-C++
3. 打开 **文件 → 新建 → 项目**，切换到 **Multimedia** 标签页

**技术说明**：

- Dev-C++ 5.11 要求模板文件使用 **ANSI 编码**（无 BOM）
- 图标文件必须小于 5KB（大图标会导致崩溃）
- 本安装器使用自动生成的 `ege-template.ico` 图标（1.1KB，蓝色背景 + 白色 "EGE" 文字）
- 图标安装到 `Icons\` 目录（与官方图标相同位置），模板安装到 `Templates\` 目录
- 构建时自动生成图标，卸载时自动删除所有文件

### Q: 如何卸载 EGE？

**A**: 运行安装程序，点击"卸载"按钮即可删除已安装的文件和模板。

---

## 💡 使用提示

- **推荐使用项目模板**：自动配置所有选项，开箱即用
- **确保使用 64-bit 编译**：架构必须设置为 x86_64
- **按 F11 快速编译运行**：最快捷的测试方式
- **模板不显示时重启 Dev-C++**：可解决大部分模板缓存问题
- **更多示例访问官网**：<https://xege.org/>

祝您使用愉快！🎨
